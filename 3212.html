<!DOCTYPE html>
<html>
<head>
    <title>אתר עם שמירת לינקים ב-Firebase וסיסמה</title>
</head>
<body>
    <h1>אתר עם שמירת לינקים ב-Firebase וסיסמה</h1>
    
    <div id="content">
        <h2>לינקים שנשמרו:</h2>
        <ul id="linksList">
        </ul>
    </div>

    <h2>הוסף לינק:</h2>
    <label for="newLink">כתובת הלינק:</label>
    <input type="text" id="newLink" required>
    <br>
    <label for="password">סיסמה:</label>
    <input type="password" id="password" required>
    <button type="button" onclick="addLink()">הוסף לינק</button>

    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.0.0/firebase-firestore-compat.js"></script>
    <script>
        // אין לשכוח להשלים את ההגדרות בהתאם להגדרות הפרוייקט שלך ב-Firebase
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // אתחול Firebase
        firebase.initializeApp(firebaseConfig);

        const db = firebase.firestore();

        function addLink() {
            const newLinkInput = document.getElementById("newLink");
            const newLink = newLinkInput.value.trim();
            const passwordInput = document.getElementById("password");
            const password = passwordInput.value;

            // בדיקה אם הסיסמה נכונה
            if (password !== "123") {
                alert("סיסמה שגויה. אנא נסה שוב.");
                return;
            }

            if (newLink) {
                // שמור את הלינק ב-Firebase Firestore
                saveLink(newLink);

                newLinkInput.value = "";
                passwordInput.value = "";
            }
        }

        function saveLink(link) {
            db.collection("links").add({
                link: link
            })
            .then(function(docRef) {
                console.log("Document written with ID: ", docRef.id);
            })
            .catch(function(error) {
                console.error("Error adding document: ", error);
            });
        }

        function loadLinks() {
            const linksList = document.getElementById("linksList");

            db.collection("links").onSnapshot(function(querySnapshot) {
                // נקה את הרשימה
                while (linksList.firstChild) {
                    linksList.removeChild(linksList.firstChild);
                }

                querySnapshot.forEach(function(doc) {
                    const listItem = document.createElement("li");
                    listItem.textContent = doc.data().link;
                    linksList.appendChild(listItem);
                });
            });
        }

        // טען את הלינקים מ-Firebase Firestore בעת טעינת הדף
        loadLinks();
    </script>
</body>
</html>
